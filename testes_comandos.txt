# üß™ Comandos de Teste - Monitor CAN Windows/Kvaser
# Copie e cole estes comandos no Prompt de Comando ou PowerShell

# ==================================================
# 1. VERIFICA√á√ÉO INICIAL
# ==================================================

# Testar instala√ß√£o completa
python teste_instalacao.py

# Verificar drivers Kvaser
python replay_windows_kvaser.py --check-drivers

# Listar interfaces CAN
python -c "import can; print('Interfaces:', can.interface.Bus.available_interfaces())"


# ==================================================
# 2. TESTES SEM HARDWARE (SIMULA√á√ÉO)
# ==================================================

# Monitor em modo simula√ß√£o (recomendado para testes iniciais)
python monitor_windows_kvaser.py --simulate

# Monitor com logging CSV (para an√°lise posterior)
python monitor_windows_kvaser.py --simulate --csv teste_simulacao.csv

# Monitor com buffer maior
python monitor_windows_kvaser.py --simulate --buffer 1000 --csv teste_buffer_grande.csv


# ==================================================
# 3. TESTES COM HARDWARE KVASER
# ==================================================

# Monitor no canal 0 (primeira interface Kvaser)
python monitor_windows_kvaser.py --channel 0

# Monitor no canal 1 (segunda interface Kvaser, se dispon√≠vel)
python monitor_windows_kvaser.py --channel 1

# Monitor com logging CSV
python monitor_windows_kvaser.py --channel 0 --csv dados_reais.csv

# Monitor com buffer personalizado
python monitor_windows_kvaser.py --channel 0 --buffer 2000 --csv dados_analise.csv


# ==================================================
# 4. TESTES DE REPLAY
# ==================================================

# Replay do arquivo de exemplo (recomendado para teste)
python replay_windows_kvaser.py exemplo_log_can.log

# Replay com canal espec√≠fico
python replay_windows_kvaser.py exemplo_log_can.log --channel 0

# Replay em velocidade 2x
python replay_windows_kvaser.py exemplo_log_can.log --speed 2.0

# Replay em velocidade 5x (r√°pido)
python replay_windows_kvaser.py exemplo_log_can.log --speed 5.0

# Replay cont√≠nuo (loop)
python replay_windows_kvaser.py exemplo_log_can.log --loop

# Replay com velocidade 3x e loop
python replay_windows_kvaser.py exemplo_log_can.log --speed 3.0 --loop


# ==================================================
# 5. TESTES COMBINADOS (DUAS JANELAS)
# ==================================================

# JANELA 1: Monitor
python monitor_windows_kvaser.py --channel 0 --csv monitor_ao_vivo.csv

# JANELA 2: Replay simult√¢neo
python replay_windows_kvaser.py exemplo_log_can.log --channel 0 --loop

# JANELA 1: Monitor em modo simula√ß√£o
python monitor_windows_kvaser.py --simulate --csv simula_vs_real.csv

# JANELA 2: Replay normal
python replay_windows_kvaser.py exemplo_log_can.log --channel 0 --speed 1.0


# ==================================================
# 6. AN√ÅLISE DE DADOS
# ==================================================

# Gerar dados para an√°lise
python monitor_windows_kvaser.py --simulate --csv dados_analise.csv

# Analisar CSV com Python/pandas (executar ap√≥s gerar dados)
python -c "
import pandas as pd
df = pd.read_csv('dados_analise.csv')
print('=== AN√ÅLISE DOS DADOS ===')
print(f'Total de linhas: {len(df)}')
print(f'Colunas: {list(df.columns)}')
print()
print('=== ESTAT√çSTICAS ===')
print(df.describe())
print()
print('=== DADOS RECENTES (√∫ltimas 5 linhas) ===')
print(df.tail())
"

# An√°lise espec√≠fica das colunas de velocidade
python -c "
import pandas as pd
df = pd.read_csv('dados_analise.csv')
if 'inv_a_act_speed_rpm' in df.columns:
    print(f'Velocidade A - Min: {df[\"inv_a_act_speed_rpm\"].min():.1f} rpm')
    print(f'Velocidade A - Max: {df[\"inv_a_act_speed_rpm\"].max():.1f} rpm')
    print(f'Velocidade A - M√©dia: {df[\"inv_a_act_speed_rpm\"].mean():.1f} rpm')
"


# ==================================================
# 7. TESTES DE PERFORMANCE
# ==================================================

# Teste de performance com buffer grande
python monitor_windows_kvaser.py --channel 0 --buffer 10000 --csv teste_performance.csv

# Teste de replay r√°pido
python replay_windows_kvaser.py exemplo_log_can.log --speed 10.0 --loop


# ==================================================
# 8. DIAGN√ìSTICO DE PROBLEMAS
# ==================================================

# Verificar se drivers est√£o funcionando
python -c "
import can
try:
    bus = can.interface.Bus(channel='0', interface='kvaser')
    print('‚úÖ Conex√£o Kvaser Canal 0 - OK')
    bus.shutdown()
except Exception as e:
    print(f'‚ùå Canal 0 - Erro: {e}')

try:
    bus = can.interface.Bus(channel='1', interface='kvaser')
    print('‚úÖ Conex√£o Kvaser Canal 1 - OK')
    bus.shutdown()
except Exception as e:
    print(f'‚ùå Canal 1 - Erro: {e}')
"

# Teste de interface b√°sica
python -c "
import can
print('Interfaces dispon√≠veis:', can.interface.Bus.available_interfaces())

try:
    import can.interface.kvaser
    print('‚úÖ Driver Kvaser - Dispon√≠vel')
except:
    print('‚ùå Driver Kvaser - N√ÉO DISPON√çVEL')
"

# Teste completo de sistema
python teste_instalacao.py


# ==================================================
# 9. EXEMPLOS AVAN√áADOS
# ==================================================

# Monitor com todos os par√¢metros
python monitor_windows_kvaser.py \
    --channel 0 \
    --buffer 5000 \
    --csv analise_completa.csv

# Replay customizado
python replay_windows_kvaser.py \
    exemplo_log_can.log \
    --channel 0 \
    --speed 2.0 \
    --loop

# Criar arquivo de log personalizado (exemplo de formato)
echo (1609459200.123456) can0 18FFF3FE#0BB80000FF000000 > meu_log.log
echo (1609459200.234567) can0 18FFE103#0000133F00000000 >> meu_log.log
echo (1609459200.345678) can0 18FFA120#0BB8000013370000 >> meu_log.log

# Replay do arquivo personalizado
python replay_windows_kvaser.py meu_log.log --channel 0


# ==================================================
# 10. COMANDOS DE LIMPEZA
# ==================================================

# Remover arquivos CSV de teste
del *.csv

# Remover arquivos de plot de teste
del *.png

# Verificar arquivos CSV gerados
dir *.csv

# Listar todos os arquivos do projeto
dir *.py *.log *.md *.bat *.txt


# ==================================================
# üí° DICAS R√ÅPIDAS
# ==================================================

# 1. SEMPRE teste primeiro com --simulate
# 2. Use --csv para salvar dados para an√°lise
# 3. Execute teste_instalacao.py para verificar tudo
# 4. Use Ctrl+C para parar os programas
# 5. Abra 2 janelas para teste simult√¢neo
# 6. Consulte README.md para documenta√ß√£o completa